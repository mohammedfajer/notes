<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-GAP5006 Game Dyanmics/tutorial-ue5/week3">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Week 3 - Using C++ and Blueprint | GameDev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/"><meta data-rh="true" name="twitter:image" content="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/"><meta data-rh="true" property="og:url" content="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Week 3 - Using C++ and Blueprint | GameDev"><meta data-rh="true" name="description" content="Task Sheet 3 - Creating Blueprints and Integrating with C++"><meta data-rh="true" property="og:description" content="Task Sheet 3 - Creating Blueprints and Integrating with C++"><link data-rh="true" rel="icon" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/web_icon.ico"><link data-rh="true" rel="canonical" href="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3"><link data-rh="true" rel="alternate" href="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3" hreflang="en"><link data-rh="true" rel="alternate" href="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/blog/rss.xml" title="GameDev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/blog/atom.xml" title="GameDev Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/css/styles.8f793144.css">
<link rel="preload" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/js/runtime~main.607cad8b.js" as="script">
<link rel="preload" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/js/main.6c6364c7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/"><div class="navbar__logo"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/web_icon_2.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/web_icon_2.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Game Development</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mohammedfajer/notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/intro">BSc Games Programming</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/gap5005-games-hardware-development">GAP5005 Games Hardware Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;GAP5005 Games Hardware Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/gap5006-game-dynamics">GAP5006 Game Dynamics</a><button aria-label="Toggle the collapsible sidebar category &#x27;GAP5006 Game Dynamics&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/">Module Info</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/tutorial---unreal-engine-5">Tutorial - Unreal Engine 5</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial - Unreal Engine 5&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week1">Week 1 - Introduction to UE5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2">Week 2 - Mouse Input and Spawning Game Objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3">Week 3 - Using C++ and Blueprint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week4">Week 4 - Animation Blueprints</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/gap5006-game-dynamics"><span itemprop="name">GAP5006 Game Dynamics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/tutorial---unreal-engine-5"><span itemprop="name">Tutorial - Unreal Engine 5</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Week 3 - Using C++ and Blueprint</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Week 3 - Using C++ and Blueprint</h1><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Task Sheet 3 - Creating Blueprints and Integrating with C++</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-c-and-blueprint">Using C++ and Blueprint<a href="#using-c-and-blueprint" class="hash-link" aria-label="Direct link to Using C++ and Blueprint" title="Direct link to Using C++ and Blueprint">​</a></h2><p>We are going to extend the project made in previous worksheets to include UE5&#x27;s visual scripting language, called <strong>Blueprint</strong>, to make our projects easier to edit.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-a-cursor-to-direct-a-projectiles-initial-velocity">Using a Cursor to Direct a Projectile&#x27;s Initial Velocity<a href="#using-a-cursor-to-direct-a-projectiles-initial-velocity" class="hash-link" aria-label="Direct link to Using a Cursor to Direct a Projectile&#x27;s Initial Velocity" title="Direct link to Using a Cursor to Direct a Projectile&#x27;s Initial Velocity">​</a></h2><p>At present, a projectile can be fired in the direction the pawn object is rotated, but it is fired at a <strong>‘fixed’</strong> height.  It would be useful to have a cursor position, so that a projectile can be fired in the <strong>‘facing’</strong> direction, but at a <strong>‘variable’</strong> height. Do the following:</p><ol><li><p>Firstly, we need an image for the crosshair cursor to be used.  From Moodle, download the <strong>crosshairs.tga</strong> file to the Contents folder of your project. (To find the folder, In UE5, right-click over Content in the Content Browser panel, and then select Show in Explorer).</p></li><li><p>Within the Content Browser panel, click on the <strong>Import</strong> icon, and select the <strong>crosshairs.tga</strong> file from the Contents folder of your project. The image should be imported to your content folder. (<strong>Note</strong>: you may be prompted to import as soon as the file is copied to the project).</p></li><li><p>Right-click over the icon and Save it.</p></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>To use the crosshair, we are going to include it as part of a Head-Up display, (HUD), for the game. Do the following:</p></div></div><ol start="4"><li><p>Create a new C++ class and select HUD as the Parent class. Call it <strong>CrossHairHUD</strong> and click on the Create class button.</p></li><li><p>Within VS, open<code>CrossHairHUD.h</code> and add a member variable of type <strong>UTexture2D</strong> called <code>_crosshairTex</code>, a float for the aim distance (initialise this to 500), and an <code>FVector</code> for the 3D position of the crosshair. </p></li><li><p>We need the texture to be set via the editor, so add the <strong>UPROPERTY</strong> flags in the appropriate place to enable this.</p></li><li><p>Finally, we need a couple of functions. On is going to update the crosshair position. This function should take in an <code>FVector2D</code> as a parameter. Call it <strong>ctr</strong>. The other function is going to override an existing function. The latter function is called <strong><code>DrawHUD()</code></strong>. Make sure to override it correctly.</p></li><li><p>We’re going to use a built in Unreal global called Canvas. To use it, we need to include the appropriate file. Use google to find the header you need to include and add it. </p></li><li><p>In the function body for your crosshair update function, first check to see if <strong>Canvas</strong> is null. If it is, return as we cannot draw our crosshair!</p></li><li><p>Next, create a local variable for the 3D world direction of the crosshair. You don’t need to initialise it to anything as we are immediately going to pass it into a function that will do that for us. It’s a function baked into Canvas called <strong><code>Deproject()</code></strong>. The idea is that it takes the desired position on the screen of the crosshair, and places it in the game world at the correct location. </p><p>This is the function:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Canvas</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Deproject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _crossHair3DPos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> worldDirectionOfCrossHair2D</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Remember <strong>ctr</strong> is the value that you pass into the update function, and <strong>_crosshair3DPos</strong> is the member variable from earlier.</p></div></div></li></ol><ol start="11"><li><p>We’re now going to move the crosshair forward into the world. Do this by adding the 3D world position to the aim distance from earlier multiplied by the 2D world location. It should be roughly: </p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">_crosshair3D </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> dir</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetSafeNormal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> _aimDist</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>The <strong>DrawHUD()</strong> function of the class <strong>ACrossHairHuD</strong> should:</p></li></ol><ul><li>Call the <code>DrawHUD()</code> function of the parent class Super to inherit its functionality.</li><li>Checks if <code>_crosshairTex</code> is not null. If it isn’t:</li><li>Calculate the center of the canvas using <code>Canvas-&gt;ClipX / 2</code> and <code>Canvas-&gt;ClipY / 2</code>. Store the result as a <strong>FVector2D</strong> called <code>ctr</code>.</li><li>Calculate the position of the crosshair texture based on the center and the texture&#x27;s dimensions.<ul><li>Create a 2D vector named <strong><code>crosshairPos</code></strong>.</li><li>Set <code>crosshairPos.X</code> to the result of subtracting half of the surface width of <code>_crosshairTex</code> from the x value of  ctr.</li><li>Set <code>crosshairPos.Y</code> to the result of subtracting half of the surface height of <code>_crosshairTex</code> from the y value of the ctr.</li></ul></li><li>Call the <strong><code>update3DCrossHairPos()</code></strong> function with the center of the canvas as an argument.</li><li>Create a <code>FCanvasTileItem</code> object using the desired position, <code>_crossHairTex-&gt;Resource</code>, and the static variable <strong><code>FLinearColour::White</code></strong> as parameters.</li><li>Set the <u>BlendMode</u> of the FCanvasTileItem to <code>SE_BLEND_Translucent</code>.</li><li>Draw the <code>FCanvasTileItem</code> object on the canvas. (The function is a member of Canvas)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="points-to-consider">Points to Consider<a href="#points-to-consider" class="hash-link" aria-label="Direct link to Points to Consider" title="Direct link to Points to Consider">​</a></h2><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>As the cross hair is on a 2D canvas, we need to calculate the 3D position of the cursor. To do this, the <strong><code>Deproject()</code></strong> function uses the current cursor position, the camera position and the viewport settings, along with a <strong>‘ray’</strong>, of length <code>AIM_DISTANCE</code> in this case, from the camera to the cursor position, to calculate the 3D position of the cursor.  The <strong><code>Deproject()</code></strong> function is sometimes used for <code>‘picking’</code> objects with the mouse cursor over objects too.</p><p>The value we are calculating for the 3D Crosshair Position isn’t currently being used, but we will use it later!</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-a-c-class-as-blueprint">Using a C++ class as Blueprint<a href="#using-a-c-class-as-blueprint" class="hash-link" aria-label="Direct link to Using a C++ class as Blueprint" title="Direct link to Using a C++ class as Blueprint">​</a></h2><p>The UE5 Editor is particularly useful when projects need to be changed. This is especially useful when working in a team.  It may be that <strong>‘base C++ code’</strong> is created, but changes are made using <u>Blueprints</u>, to allow, particularly, non-programmers to amend objects, as they see fit.<br>
<!-- -->Blueprint is a more visual development language, which is particularly useful for prototyping, as no code  is required. Blueprint, though, is slower to run than compiled C++ code. However, the UE5 Editor expects some options / settings to be used as Blueprints.</p><p>We are now going to use the HUD, we have initially created in C++, as a Blueprint. Do the following:</p><ol><li><p>Open the UE5 Editor, if it’s not already open, click on Compile.</p></li><li><p>Within the Content Browser, right-click over the Content folder, and select New Folder. Change the name to <u>Blueprints</u> and press the enter key.</p></li><li><p>Right-click over the CrosshairHUD C++ class,  , and select Create Blueprint class based on <code>CrosshairHUD</code>.</p></li><li><p>Change the name to: <strong>BP_CrossHairHUD</strong> and click on the Blueprints folder and then click on the Create Blueprint class button.</p></li><li><p>A Blueprint editor should be displayed. Select the <code>crosshair</code> icon, from within the <code>X Hair Texture option</code>, in the <u>Details</u> panel, often on the right, by changing <code>None</code> to the crosshair texture.</p></li><li><p>Compile and Save the Blueprint and close the Blueprint editor.</p><p>To be able to use the Blueprint HUD, we need a Blueprint Game mode to be created and <strong>‘set’</strong> for the project. </p></li></ol><ol start="7"><li><p>Right-click over the <strong>GDyn1</strong> GameModeBase C++ class, and select Create Blueprint class based on <strong>GDyn1</strong> <u>GameModeBase</u>.  Change the name to: <code>BP_GDyn3GameMode</code> and click on the Blueprints folder and then click on the Create Blueprint class button.</p></li><li><p>Select <code>BP_CrossHairHUD</code> within the HUD class option, using the arrow button.</p></li><li><p>Compile and Save the Blueprint and close the Blueprint editor.</p></li><li><p>We now need to change the <code>project settings</code> to use the default HUD. Click on <strong>Edit</strong>, <strong>Project Settings</strong> … and select <code>Maps &amp; Modes</code>. </p></li><li><p>Change the Default GameMode to <code>BP_GDyn3GameMode</code>, using the arrow button.</p></li><li><p>Close the <code>Project settings</code> window. Click Save Current.</p></li><li><p>Run the game, and the crosshair should be displayed within the PIE.</p></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>You may want to change the lower, and higher, pitch values in function lookup, in GD_Pawn.cpp, to say -40 and 20, so that the cursor is easier to see, and the range of the camera is better.  </p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-c-enemy-class-as-a-blueprint">Using the C++ Enemy Class as a Blueprint<a href="#using-the-c-enemy-class-as-a-blueprint" class="hash-link" aria-label="Direct link to Using the C++ Enemy Class as a Blueprint" title="Direct link to Using the C++ Enemy Class as a Blueprint">​</a></h2><p>At present, the enemies are spawned, based, purely, on C++ code.  It would be useful to be able to change values, such as what meshes an enemy uses, from within the UE5 Editor.  </p><p>For example, we <strong>&#x27;hard-coded&#x27;</strong> paths to meshes, and materials, within the C++ code.  If we wanted to change the meshes / materials, programmers would need to amend C++ code and re-build it.  It would be more flexible, and easier for non-programmers, to be able to change meshes, for example, without having to change the C++ code.</p><p>To do this, it is best to create Blueprints from the C++ code, which can then be edited within the UE5 Editor, without changing the C++ code.</p><p>Firstly, we are going to make some changes to the C++ Enemy class. Do the following:</p><ol><li><p>Within VS, open <code>Enemy.h</code>.</p></li><li><p>Just before the line with <strong>staticMeshComponent</strong> Add the code:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">UPROPERTY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EditAnywhere</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Remove any code relating to <strong>dynMaterial1</strong> (except in OnHit – we’ll change that later) and add the following code:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">UPROPERTY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EditAnywhere</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Category </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Gameplay&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UMaterial </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">material1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Within the <code>Enemy.cpp</code> file, change the constructor code to:  </p><ul><li><p>Set the <code>PrimaryActorTick</code> property to true.</p></li><li><p>Initialise the collision component using <strong>CreateDefaultSubObject</strong> and set the size of the capsule component to have a radius of 20.0 and a height of 50.0.</p></li><li><p>Enable physics simulation on the capsule component.</p></li><li><p>Set the collision profile of the capsule component to <code>&quot;BlockAll&quot;</code>.</p></li><li><p>Set the collision of the capsule component to <code>&quot;QueryAndPhysics&quot;</code>.</p></li><li><p>Make the capsule component the root component.</p></li><li><p>Initialise your <strong>UStaticMeshComponent</strong>.</p></li><li><p>Set the collision profile of the static mesh component to <code>&quot;NoCollision&quot;</code>.</p></li><li><p>Attach the static mesh component to the root component.</p></li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Mostly this is just deleting the bounds code we added for the static mesh!</p></div></div></li></ol><ol start="5"><li><p>Within the <code>OnHit()</code> function change the lines of code containing <code>dynMaterial1</code> to use <code>material1</code>.</p></li><li><p>Build the program, to check the code has no errors.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="making-the-c-enemy-class-into-a-blueprint-class">Making the C++ Enemy Class into a Blueprint Class<a href="#making-the-c-enemy-class-into-a-blueprint-class" class="hash-link" aria-label="Direct link to Making the C++ Enemy Class into a Blueprint Class" title="Direct link to Making the C++ Enemy Class into a Blueprint Class">​</a></h2><ol><li><p>Open the UE5 Editor, if it’s not already open.</p></li><li><p>Right-click over the C++ Enemy class, within the Content Browser,  and create a Blueprint class from it, named <code>BP_Enemy</code> and store it in the Blueprints folder.</p></li><li><p>The Blueprint editor should be displayed. Click on <code>staticMeshComponent</code>.</p></li><li><p>Within the Details panel, and in the Static Mesh partition, change None, to a <code>Cylinder mesh</code>, (it should be <code>100x100x100</code> size).</p></li><li><p>Click on Rendering and then Override Materials and click the + (plus) button, or, in Element 0, select and change None to <code>WidgetMaterial_Y</code>.</p></li><li><p>Within the Collisions panel, set Collision presets to <code>No Collision</code>, if required.</p></li><li><p>Within the Transform partition, set the scale to <code>0.3</code> for X and Y axes.</p></li><li><p>Go back to the Components panel, and select <code>BP_Enemy(self</code>).</p></li><li><p>Within the Details panel, and the <code>Gameplay</code> partition, for <code>Material 1</code>, change None, to <code>WidgetMaterial_X</code>.</p></li><li><p> Click on Compile and then Save the Blueprint and close the window.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="making-the-c-spawnenemy-class-spawn-a-blueprint-class">Making the C++ SpawnEnemy class Spawn a Blueprint Class<a href="#making-the-c-spawnenemy-class-spawn-a-blueprint-class" class="hash-link" aria-label="Direct link to Making the C++ SpawnEnemy class Spawn a Blueprint Class" title="Direct link to Making the C++ SpawnEnemy class Spawn a Blueprint Class">​</a></h2><p>To be able to use Blueprint classes such as the <code>BP_Enemy</code> one, we need to be able set it to be a class that can be spawned.  To do this requires that a class be a Blueprint. As for the above C++ class, we can use the <code>SpawnEnemy</code> C++ class to use a Blueprint class.</p><p>Firstly, a few changes are needed to make the SpawnEnemy C++ class more flexible to use.  Do the following:</p><ol><li><p>Within VS, open <code>SpawnEnemy.h</code>.</p></li><li><p>Add the following code:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Enemy class to spawn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UPROPERTY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EditDefaultsOnly</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Category </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enemy&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TSubclassOf</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AEnemy</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> _enemyClass</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Within the <code>AP_SpawnEnemy.cpp</code> file, and within the <code>spawnAnEnemy</code> function, change the SpawnActor code to:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">GetWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token generic-function function" style="color:#d73a49">SpawnActor</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">AEnemy</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_enemyClass</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spawnLoc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rot</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spawnParams</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Build the program, to check the code has no errors.</p></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Now in the editor you can set what type of enemy you want to spawn. <code>_enemyClass</code> can be set in editor to anything that inherits from <code>AEnemy</code>. The specified <strong>enemyClass</strong> type will be spawned!</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="making-the-c-spawnenemy-class-into-a-blueprint-class">Making the C++ SpawnEnemy class into a Blueprint Class<a href="#making-the-c-spawnenemy-class-into-a-blueprint-class" class="hash-link" aria-label="Direct link to Making the C++ SpawnEnemy class into a Blueprint Class" title="Direct link to Making the C++ SpawnEnemy class into a Blueprint Class">​</a></h2><ol><li><p>Open the UE5 Editor, if it’s not already open.</p></li><li><p>Right-click over the C++ <code>SpawnEnemy</code> class, within the Content Browser,  and create a Blueprint class from it, named <code>BP_SpawnEnemy</code> and store it in the Blueprints folder.</p></li><li><p>Go back to the Components panel, and select <code>BP_SpawnEnemy</code> (self).</p></li><li><p>Within the Details panel, and the <code>Enemy</code> partition, for Enemy Class, change <code>None</code>, to <code>BP_Enemy</code>.  This will be used when spawning the enemies.</p></li><li><p>Click on Compile and then Save the Blueprint, and close the window.</p></li><li><p>Save the level using the Save Current button.</p><p>We now want to remove the <strong>&#x27;old&#x27;</strong> SpawnEnemy object and create a new one, using the Blueprint version.</p></li><li><p>Within the UE5 Editor, delete the <code>SpawnEnemy</code> object from the <strong>World Outliner</strong> panel.</p></li><li><p>Drag the <code>BP_SpawnEnemy</code> icon from the Content Browser to the main Editor window.</p></li><li><p>As with Week 2&#x27;s worksheet, set the Location of the Transform of <code>BP_SpawnEnemy</code>, as required.</p></li><li><p>Save the level using the Save button. Run and check enemies are spawned.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adjusting-the-projectile-trajectory-using-the-crosshair">Adjusting the Projectile Trajectory using the Crosshair<a href="#adjusting-the-projectile-trajectory-using-the-crosshair" class="hash-link" aria-label="Direct link to Adjusting the Projectile Trajectory using the Crosshair" title="Direct link to Adjusting the Projectile Trajectory using the Crosshair">​</a></h2><p>We need to change the projectile’s trajectory based on the crosshair position. We are going to use the 3D position of the crosshair cursor.</p><p>Do the following:</p><ol><li>Amend the <code>fire</code> function, in GD_Pawn.cpp, so that the if (proj) statement is as follows:</li></ol><ul><li>Get a pointer to the Cross Hair HUD You should use Unreal’s <code>Cast&lt;&gt;()</code> function to:<ul><li>Get an <code>APlayerController</code> from the result of <code>GetController</code>.</li><li>Then Cast the result of <code>playerController-&gt;GetHUD()</code> to an <code>ACrosshairHUD</code>.
<strong>(Use online reference if you don’t understand how to use the Cast function)</strong>.</li></ul></li></ul><ul><li>Check if the pointer to the Cross Hair HUD object is valid.</li><li>If the pointer to the Cross Hair HUD object is valid, call the <strong><code>FireInDirection()</code></strong> method on the proj object and pass in the result of subtracting projection location from the <strong>crossHair3DPos</strong> property of the Cross Hair HUD object.</li></ul><ol start="2"><li><p>Add any required includes!</p></li><li><p>Build, to check for errors, and then go back to the UE5 Editor and Run the program.</p></li></ol><p><strong>Note how the HUD is accessed by firstly obtaining the <code>PlayerController</code>, from which a HUD object can be retrieved.  We then directly access the public <code>crossHair3DPos</code> attribute that stores the 3D cursor position, which has been calculated from the 2D cursor.</strong></p><p>The path of the projectile is now variable, depending on where the crosshair is, but it does not always closely follow the crosshair, as the projectile will <strong>‘realistically’</strong> drop before <strong>‘reaching’</strong> the crosshair cursor, due to the projectile being affected by acceleration due to gravity. </p><p>Increase the Projectile’s Initial speed value, to say <code>3000</code>, to see how close it would follow the cursor position.  Reset it, as required.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="points-to-consider-1">Points to Consider<a href="#points-to-consider-1" class="hash-link" aria-label="Direct link to Points to Consider" title="Direct link to Points to Consider">​</a></h2><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>It should be clear that it is not very efficient / flexible changing hard-coded values, such as a Projectile’s Initial speed, as a programmer must change code, and then re-compile, before the game can be re-played in the UE5 editor!  </p><p>This is why it is better to create the C++ classes, make appropriate attributes / values editable, using appropriate <strong>UPROPERTY</strong> constants, and create Blueprints from the C++ class!</p><p>At present, the game does not look very impressive, and collisions could be handled in a better way.  We will see in future worksheets, how templates can be used to ease development, and how code for moving characters can be simplified by using a <code>Character class</code>!.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Week 2 - Mouse Input and Spawning Game Objects</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week4"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Week 4 - Animation Blueprints</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-c-and-blueprint" class="table-of-contents__link toc-highlight">Using C++ and Blueprint</a></li><li><a href="#using-a-cursor-to-direct-a-projectiles-initial-velocity" class="table-of-contents__link toc-highlight">Using a Cursor to Direct a Projectile&#39;s Initial Velocity</a></li><li><a href="#points-to-consider" class="table-of-contents__link toc-highlight">Points to Consider</a></li><li><a href="#using-a-c-class-as-blueprint" class="table-of-contents__link toc-highlight">Using a C++ class as Blueprint</a></li><li><a href="#using-the-c-enemy-class-as-a-blueprint" class="table-of-contents__link toc-highlight">Using the C++ Enemy Class as a Blueprint</a></li><li><a href="#making-the-c-enemy-class-into-a-blueprint-class" class="table-of-contents__link toc-highlight">Making the C++ Enemy Class into a Blueprint Class</a></li><li><a href="#making-the-c-spawnenemy-class-spawn-a-blueprint-class" class="table-of-contents__link toc-highlight">Making the C++ SpawnEnemy class Spawn a Blueprint Class</a></li><li><a href="#making-the-c-spawnenemy-class-into-a-blueprint-class" class="table-of-contents__link toc-highlight">Making the C++ SpawnEnemy class into a Blueprint Class</a></li><li><a href="#adjusting-the-projectile-trajectory-using-the-crosshair" class="table-of-contents__link toc-highlight">Adjusting the Projectile Trajectory using the Crosshair</a></li><li><a href="#points-to-consider-1" class="table-of-contents__link toc-highlight">Points to Consider</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Mohammed Fajer, University of Bolton.</div></div></div></footer></div>
<script src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/js/runtime~main.607cad8b.js"></script>
<script src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/js/main.6c6364c7.js"></script>
</body>
</html>