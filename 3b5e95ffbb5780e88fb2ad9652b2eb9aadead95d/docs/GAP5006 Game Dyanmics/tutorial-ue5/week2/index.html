<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-GAP5006 Game Dyanmics/tutorial-ue5/week2" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Week 2 - Mouse Input and Spawning Game Objects | GameDev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/"><meta data-rh="true" name="twitter:image" content="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/"><meta data-rh="true" property="og:url" content="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Week 2 - Mouse Input and Spawning Game Objects | GameDev"><meta data-rh="true" name="description" content="Task Sheet 2 - Working with UE5"><meta data-rh="true" property="og:description" content="Task Sheet 2 - Working with UE5"><link data-rh="true" rel="icon" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/web_icon.ico"><link data-rh="true" rel="canonical" href="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2"><link data-rh="true" rel="alternate" href="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2" hreflang="en"><link data-rh="true" rel="alternate" href="https://mohammedfajer.github.io/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/blog/rss.xml" title="GameDev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/blog/atom.xml" title="GameDev Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/css/styles.872396f0.css">
<script src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/js/runtime~main.cbf78553.js" defer="defer"></script>
<script src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/js/main.aefd22d7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/"><div class="navbar__logo"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/web_icon_2.svg" alt="My Site Logo" class="themedComponent_ZRzL themedComponent--light_dGsa"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/img/web_icon_2.svg" alt="My Site Logo" class="themedComponent_ZRzL themedComponent--dark_pzCA"></div><b class="navbar__title text--truncate">Game Development</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mohammedfajer/notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_IP3a"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI"><div class="docsWrapper_JGIH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docRoot_eRbX"><aside class="theme-doc-sidebar-container docSidebarContainer_Ta75"><div class="sidebarViewport_fgog"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/intro">BSc Games Programming</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/gap5005-games-hardware-development">GAP5005 Games Hardware Development</a><button aria-label="Expand sidebar category &#x27;GAP5005 Games Hardware Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/gap5006-game-dynamics">GAP5006 Game Dynamics</a><button aria-label="Collapse sidebar category &#x27;GAP5006 Game Dynamics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/">Module Info</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/tutorial---unreal-engine-5">Tutorial - Unreal Engine 5</a><button aria-label="Collapse sidebar category &#x27;Tutorial - Unreal Engine 5&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week1">Week 1 - Introduction to UE5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week2">Week 2 - Mouse Input and Spawning Game Objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3">Week 3 - Using C++ and Blueprint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week4">Week 4 - Animation Blueprints</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_lg0V"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/gap5006-game-dynamics"><span itemprop="name">GAP5006 Game Dynamics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/category/tutorial---unreal-engine-5"><span itemprop="name">Tutorial - Unreal Engine 5</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Week 2 - Mouse Input and Spawning Game Objects</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Week 2 - Mouse Input and Spawning Game Objects</h1></header>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>Task Sheet 2 - Working with UE5</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>This week we are going to extend the simple object we created in Worksheet 1, so that a mouse can be used with input, and projectiles can be fired.</p>
<p>Do the following:</p>
<ol>
<li>
<p>Open the <strong>Epic Games Launcher</strong>, to load UE5 and click on the Launch button for <strong>Version 5.2.1</strong> (or select the down arrow to select the version required). The UE5 <strong>project browser</strong> should be displayed.</p>
</li>
<li>
<p>Open project <strong>GDyn1</strong>. (Alternatively, double-click on the <strong>GDyn1.uproject</strong> file, in the folder where you stored the project from the previous worksheet). The previous UE5 project should be opened with the default <strong>GDMap</strong> setup displayed.</p>
</li>
<li>
<p>It is good practice to refresh the <strong>VS</strong> files, on opening a UE5 C++ project. Do this through <strong>Tools -&gt; Refresh Visual Studio Project</strong>.</p>
</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/refresh_vs-96137ec6ddf15fa250914a25d929749c.png" width="60%" alt="Refresh VS"></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="mouse-input">Mouse Input<a href="#mouse-input" class="hash-link" aria-label="Direct link to Mouse Input" title="Direct link to Mouse Input">​</a></h2>
<p>At present, unless you completed the bonus tasks, the cube can only be moved in the world X and Y axes, even when the object is rotated. It would be useful to be able to face a direction we want to move in, using mouse input, and then use the keys to move in the selected direction, or at 90° degrees to it.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="using-mouse-input">Using Mouse Input<a href="#using-mouse-input" class="hash-link" aria-label="Direct link to Using Mouse Input" title="Direct link to Using Mouse Input">​</a></h3>
<ol>
<li>Create two input actions for turn called <strong>IA_Turn</strong> to use <strong>Axis1D (float)</strong> as the value type and one for lookup called <strong>IA_Lookup</strong> to use <strong>Axis1D (float)</strong> as the value type. To create this navigate to the <strong>Content Drawer</strong> under the Input folder (create one if not created). Right-click and select <strong>Input</strong> and then <strong>Input Action</strong>.</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_ue5_ia-778bdcc034dfe2c0541b90e55dd639f7.png" width="90%" alt="Refresh VS"></div>
<ol start="2">
<li>Next open the <strong>Input Mapping Context (IMC)</strong> and the mapping for turn and lookup as shown below. For the <strong>turn</strong> make sure to select <code>Mouse X</code> as the input device and for <strong>lookup</strong> select the <code>Mouse Y</code> input device.</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_imc-3205e0f46ea11c6471ed6e538c07a655.png" width="40%" alt="Refresh VS"></div>
<ol start="3">
<li>Now head to your C++ Visual studio project and open <strong>GD_Pawn.h</strong> header file.  Under the protected access specifier add the code for input actions as shown below.</li>
</ol>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UPROPERTY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EditAnywhere</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Category </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enhanced Input&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UInputAction </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">InputTurn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UPROPERTY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EditAnywhere</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Category </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Enhanced Input&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UInputAction </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">InputLookup</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Now define the input callback methods for <strong>turn</strong> and <strong>lookup</strong> input actions as shown below.</li>
</ol>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Turn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> FInputActionValue </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Lookup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> FInputActionValue </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now open the cpp <strong>GD_Pawn.cpp</strong> source file. Inside <strong>SetupPlayerInputComponent(...)</strong> method setup the function binding for the input actions we have created.</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PEI</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">BindAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InputTurn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ETriggerEvent</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Triggered</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">AGD_Pawn</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Turn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PEI</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">BindAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InputLookup</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ETriggerEvent</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Triggered</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">AGD_Pawn</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Lookup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Inside the editor viewport select the <strong>pawn</strong> cube, and inside the <strong>Details</strong> panel under <u>Enhanced Input</u> setup the input actions we just created as shown below.</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_input_action_editor-076e146075450a326e5d89a144a371cb.png" width="40%" alt="Refresh VS"></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="responding-to-mouse-inputs">Responding to Mouse Inputs<a href="#responding-to-mouse-inputs" class="hash-link" aria-label="Direct link to Responding to Mouse Inputs" title="Direct link to Responding to Mouse Inputs">​</a></h3>
<p>Now that we&#x27;ve created two methods to respond to mouse movements and bound them to the input action mappings. What left is to code the logic for them.</p>
<ol>
<li>Within the <strong>GD_Pawn.cpp</strong> file, add the following code logic.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="turn-method">Turn Method<a href="#turn-method" class="hash-link" aria-label="Direct link to Turn Method" title="Direct link to Turn Method">​</a></h4>
<ul>
<li><strong>Turn(..)</strong> method should use the <strong><code>FInputActionValue</code></strong> parameter to receive input and extract the axis value from it using <code>Value.Get&lt;FInputActionValue::Axis1D&gt;()</code>.</li>
<li>Define a turn rate variable <strong>TurnRate</strong> to control how fast the pawn turns. Adjust this value as needed.</li>
<li>Calculate the amount of turn based on the axis value, turn rate, and the delta time from <strong><code>GetWorld()-&gt;GetDeltaSeconds()</code></strong>.</li>
<li>Get the current rotation of the pawn using <strong>GetActorRotation()</strong>.</li>
<li>Update the <u>Yaw</u> component of the rotation (<code>NewRotation.Yaw</code>) by adding the calculated turn amount.</li>
<li>Finally set the new rotation of the pawn using <strong><code>SetActorRotation(NewRotation)</code></strong>.</li>
</ul>
<p>The following is a simple <strong>pseudocode</strong> (not real code) to illustrate the points.</p>
<div class="language-text codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">Function Turn(Value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AxisValue = ExtractAxisValue(Value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TurnRate = 100.0 // Adjust as needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TurnAmount = AxisValue * TurnRate * DeltaTime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CurrentRotation = GetPawnRotation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NewRotation.Yaw = CurrentRotation.Yaw + TurnAmount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetPawnRotation(NewRotation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Function</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="lookup-method">Lookup Method<a href="#lookup-method" class="hash-link" aria-label="Direct link to Lookup Method" title="Direct link to Lookup Method">​</a></h4>
<ul>
<li><strong>Lookup(..)</strong> method should use the <strong><code>FInputActionValue</code></strong> parameter to receive input and extract the axis value from it using <code>Value.Get&lt;FInputActionValue::Axis1D&gt;()</code>.</li>
<li>Define a look rate variable <strong>LookRate</strong> to control how fast the camera rotates. Adjust this value as needed.</li>
<li>Calculate the amount of rotation based on the axis value, look rate, and delta time from <strong><code>GetWorld()-&gt;GetDeltaSeconds()</code></strong>.</li>
<li>Get the current rotation of the camera component using <strong><code>Camera-&gt;GetComponentRotation()</code></strong>.</li>
<li>Update the <u>Pitch</u> component of the rotation, clamping it between -60 and -20 degrees to limit the camera&#x27;s vertical movement.</li>
<li>Set the new rotation of the camera component using <strong><code>Camera-&gt;SetWorldRotation(NewCameraRotation)</code></strong>;</li>
</ul>
<p>The following is a simple <strong>pseudocode</strong> (not real code) to illustrate the points.</p>
<div class="language-text codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-text codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">Function Look(Value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AxisValue: float = ExtractAxisValue(Value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LookRate: float = 100.0 // Adjust as needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LookAmount: float = AxisValue * LookRate * DeltaTime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NewCameraRotation: FRotator = GetCameraRotation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NewCameraRotation.Pitch = ClampAngle(CurrentCameraRotation.Pitch + LookAmount, -60.0, -20.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SetCameraRotation(NewCameraRotation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Function</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Within the UE5 Editor, <strong>Compile</strong> the program. Play the game and move the mouse to rotate the object and also move the <code>pitch</code> rotation of the camera up and down. Make sure to <strong>Save</strong>.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p><strong>Note</strong> how the object&#x27;s rotation is changed, based on the <code>mouse X</code> position. Also, the camera also moves with the pawn object, as it is attached to the object.  Note, also how the camera&#x27;s <strong>pitch</strong> is changed with <code>mouse y</code> position, but the <strong>LookUp()</strong> function does not change the object&#x27;s rotation / position.</p><p>At present, the object still only moves vertically / horizontally.  It would be useful to move the object, based on the direction the object / camera is facing / pointing.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="moving-an-object-in-a-rotated-direction">Moving an Object in a Rotated Direction<a href="#moving-an-object-in-a-rotated-direction" class="hash-link" aria-label="Direct link to Moving an Object in a Rotated Direction" title="Direct link to Moving an Object in a Rotated Direction">​</a></h2>
<p>We need to know what the object&#x27;s <strong>direction</strong> is. UE5 stores what is called a <strong><code>forward</code></strong> vector and a <strong><code>right</code></strong> vector for an Actor object. A Pawn object is an Actor, so we can use the actor&#x27;s forward / right vectors to move in the correct directions. Alternatively we can use the <code>UStaticMeshComponent</code> i.e. <strong>VisibleComponent</strong> forward and right vectors to achieve the same behaviour.</p>
<p>Unreal Engine uses a rare <strong>left-handed</strong>, Z-up coordinate system, this is inconveniently divergent from most other popular 3D software packages and commonly used game engines, but different doesn&#x27;t mean wrong.</p>
<p>The most important thing to remember is that the virtual space inside your Unreal project is determined by three axes: ** <span style="color:red"> X </span> **,
** <span style="color:green">Y</span> **, and ** <span style="color:blue"> Z </span> **. They represent the ** <span style="color:red"> forward/backward </span> **, ** <span style="color:green"> left/right </span> **, and ** <span style="color:blue"> up/down </span> ** directions respectively.</p>
<p>Therefore to move the object alongside the actor forward and right vectors we do the following.</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Get the forward and right movement components from the input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> ForwardInput </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> RightInput </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Calculate the movement direction based on the input</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector ForwardVector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetActorForwardsVector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector RightVector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetActorRightVector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector MovementDirection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ForwardVector </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> ForwardInput </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> RightVector </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> RightInput</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Calculate the new location for the pawn using the current velocity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FVector NewLocation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetActorLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CurrentVelocity </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> MovementDirection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetSafeNormal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">DeltaTimeSeconds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Move the pawn to the new location</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">SetActorLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NewLocation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>It should be noted the use of functions <strong><code>GetActorForwardVector()</code></strong> and <strong><code>GetActorRightVector()</code></strong> that return <strong>FVector</strong> objects showing the respective direction an object is &#x27;facing&#x27; and the &#x27;right&#x27; vector at 90° to the forward vector, which change when an object is rotated.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>We are going to use 3 main techniques for debugging our program in UE. Namely:</p><ul>
<li>On-Screen <code>Print</code> statements</li>
<li>Output to a <code>Console-Log</code> window</li>
<li>(Most usefully) Using Visual Studio <code>Debugger</code></li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="debugging-c-code-in-ue5">Debugging C++ Code in UE5<a href="#debugging-c-code-in-ue5" class="hash-link" aria-label="Direct link to Debugging C++ Code in UE5" title="Direct link to Debugging C++ Code in UE5">​</a></h3>
<ol>
<li>A good way to start debugging, and for use as a rudimentary feedback system, is to use a debug output message. Add the following code to any method you like, for example the <code>Move()</code> method, within the <strong>GD_Pawn.cpp</strong> file.</li>
</ol>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GEngine</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GEngine</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">AddOnScreenDebugMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.0f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FColor</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Green</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TEXT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;From Move&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>We also need to include the <strong>Engine</strong> header, as it includes numerous helper attributes / functions, including debug help functions. Add:</li>
</ol>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;Engine/Engine.h&quot;</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">// Include this header to access GEngine and for debug msg</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Just below the other include files in the cpp file.</p>
<ol start="3">
<li>Within the UE5 Editor, <strong>Compile</strong> and Play the game and use the mouse to rotate the object. Press the <strong>W</strong> and <strong>S</strong> keys and check that the debug message is displayed.</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_LMjb alert alert--secondary"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_pGk6"><p><strong>Note</strong>: The <code>-1</code> value in the <strong><code>AddOnScreenDebugMessage(...)</code></strong> ensures debug messages are added, one after another. The <code>5.0f</code> is the time to display the message before it disappear.</p><p>You should note that numerous debug messages are displayed. So, the <code>Move()</code> method is being called.</p><p>We could continue to use on-screen debug messages, but if there are multiple messages, and if output messages need formatting, a more useful technique can be to use the <strong><code>log</code></strong> output facility available in UE5.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="using-ue5s-log-output">Using UE5&#x27;s Log Output<a href="#using-ue5s-log-output" class="hash-link" aria-label="Direct link to Using UE5&#x27;s Log Output" title="Direct link to Using UE5&#x27;s Log Output">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>UE5 features a useful log facility that provides detailed output on any items set for logging, including additions, changes, and log messages. For instance, it logs changes made to objects within the UE5 editor and provides output as a program runs.</p></div></div>
<ol>
<li>It would be useful to output the value of the <code>CurrentVelocity</code> member variable, at different stages within the program. Add the following debug message and add this code at the end of the <code>Move()</code> method.</li>
</ol>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">UE_LOG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LogTemp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Warning</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TEXT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Move velocity %s&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">CurrentVelocity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Note</strong> how <code>%s</code> substitutes a string value into it.  The **<code>ToString()</code> function returns a <strong>TCHAR</strong>, but we need the string, so we use the dereference pointer.</p>
<ol start="2">
<li>
<p>Copy the above code to the end of the <strong>Tick()</strong> function.  Amend text &quot;Move()&quot; to the respective function names.</p>
</li>
<li>
<p>Within the UE5 Editor, <strong>Compile</strong> the program.</p>
</li>
<li>
<p>We now want to display UE5&#x27;s log window. Within the UE5 Editor, select menu option Window, Developer Tools, Output Log.  Move the window to an appropriate size / location.  It is recommended that you right-click over the output log and select Clear Log to reduce the current output.</p>
</li>
<li>
<p>Play the game and use the mouse to rotate the object.  Press the <strong>W</strong> and <strong>S</strong> keys and check that the output log messages are displayed.  Your output should look similar to below.</p>
</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_log-8a267ae9d96a0d1530053cf805450a20.png" width="60%" alt="Refresh VS"></div>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>Firstly, you should note that there are a large number of outputs, as each function is called every frame.</p><p>We know VS is very good for debugging C++ programs.  It would be useful to be able to use VS&#x27;s debug facilities.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="using-vs2022s-debugging-tools">Using VS2022&#x27;s Debugging Tools<a href="#using-vs2022s-debugging-tools" class="hash-link" aria-label="Direct link to Using VS2022&#x27;s Debugging Tools" title="Direct link to Using VS2022&#x27;s Debugging Tools">​</a></h3>
<p>It would be useful to be able to put breakpoints within the project to check where values are changed.  Do the following to setup the project so that VS is used for debugging.</p>
<ol>
<li>
<p>Close the UE5 Editor.</p>
</li>
<li>
<p>Within VS, change the Solution Configuration from Development, or similar, to <strong>DebugGame Editor</strong>, as partially shown below.</p>
</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_debug_vs-27ffc04e2fdb92ad808b61bc52099c06.png" width="40%" alt="Refresh VS"></div>
<ol start="3">
<li>Place a <strong>Breakpoint</strong> within the <strong>Move()</strong> method or/and <strong>Tick()</strong> method, by using the <strong>F9</strong> key, or equivalent, in each function, as partially shown below.</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_breakpoint-8be09f078f264ee54f808d69b45e3bcd.png" width="80%" alt="Refresh VS"></div>
<ol start="4">
<li>Run the program, using Start program green arrow, or by pressing the <strong>F5</strong> key. The program should build the game, if required, and then open the UE5 Editor.</li>
</ol>
<div class="image-container"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAbCAMAAABP9I/XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABCUExURc/W5dDX5s7V5NHY5rrSwjl+Npe/ms/V5DF5Lm+nbMzb3lGLTTR7MIKzgdDX5USEQKrJrs/W5FyYWcbZ0M/V5QAAACicVIEAAAAWdFJOU////////////////////////////wAB0sDkAAAACXBIWXMAABJxAAAScAHqx0vPAAAArklEQVQoU3WRUQ7DIAxDp6SqUpSpVcX9zzq7CYyyzvBBzMMK8NJH/bXrg0jnclTQKqIqwyAtsBe5CbYIcFuxnmjEm51aak04aKSY+7780GKGjXWiGUJthUija7NtX+LARaPztM2joyH7kr9R9E7Sdj9YzvRZ2lMMtG9a40q3vo94zHs2A2ijHOgNX0IU8DdbEQAXk3CnmXmJbKNRMZcBoaR5/Tw+0L2c6a7cfKZVP+cJDxpCUDesAAAAAElFTkSuQmCC" width="2%" alt="Refresh VS"></div>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p><strong>Note</strong>: if you get error: “Unable to start program...”, or similar, it means that the Engine project is set as the default project.  If so, right-click over the GDyn1 project, from within the Solution Explorer panel, and select Set as StartUp project, and then press F5 to try again.</p></div></div>
<ol start="5">
<li>
<p>Within the UE5 Editor, press <strong>Play</strong>.  The program should return to VS2022, at the <strong>Breakpoint</strong>, as the <strong><code>Move()</code></strong> function is called every frame. It would be better if we only &#x27;stop&#x27; the program when a <strong>W</strong> or <strong>S</strong> key is pressed.</p>
</li>
<li>
<p>Firstly, stop the program in VS2022, by pressing <strong>Shift F5</strong>, or by pressing the red square, toolbar icon.</p>
</li>
</ol>
<div class="image-container"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAbCAMAAABVyG9ZAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABpUExURc/W5dDX5tLb69Lc7NLc68/V5MvJ1srI1MrI1cvL2Jc4JpAnE5IsGJY3JcvK15IqFYoXAIwdBpApFJMuGowcBY4hC5ItGZEpFJAoE5g8K5QwHpc7Ks/W5MzO28zN2szN29Hb6tHb6wAAAPdk/50AAAAjdFJOU/////////////////////////////////////////////8AZimDlgAAAAlwSFlzAAASdwAAEnABPJ6o0gAAAOtJREFUKFN1UNsKxTAI69vYw6At7OGUgvj/P3mS6G6wabu2xkRn8U8rbvPV3Yr5/PDiTHh1CCLhHgmfYoGG+2MLRq1EDoMGZchiMTdbFixuvKBGVuTYtqd1icFZi4fttRFodScLoRm1cO1CaExU+slKqA5mMnbWGgk1sRhkh7hfrAaWKvC/otNREyKLgWQBvNdStZwhoF5rC085dahpbH0btP4DFKg6JG2acWMhjqcmH/TLQKKOxzRgfCJdEhS5WMTxFYOOlSwliBkHZZ4sHav7ysgxeTm7XVEQoGYYcYoqXTtYiaxMV1Cn+fQ/6gJP/cVG/IIAAAAASUVORK5CYII=" width="2%" alt="Refresh VS"></div>
<ol start="7">
<li>
<p>Right-click over the Breakpoint and select the <strong>Conditions</strong> ... option.</p>
</li>
<li>
<p>Type in <code>ForwardVector.X != 0</code> in the condition field, as show below. This a dummy example, you can set it to different conditions to see its behaviour.</p>
</li>
<li>
<p>Click on Close. Within the UE5 Editor or VS, press Play or run.</p>
</li>
</ol>
<div class="image-container"><img src="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/assets/images/w2_ue5_condition-648e7b4aca8187b31fa8cb4c3c78383f.png" width="80%" alt="Refresh VS"></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="spawning-objects">Spawning Objects<a href="#spawning-objects" class="hash-link" aria-label="Direct link to Spawning Objects" title="Direct link to Spawning Objects">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>It would be useful to be able to fire projectiles from the cube. We will need to be able to <strong>spawn</strong> objects within the game.</p></div></div>
<p>It would be useful to <strong><code>fire</code></strong> projectiles in the direction the player object is pointing. We can spawn <code>actors</code> directly from classes that have been created in C++. Do the following:</p>
<ol>
<li>
<p>Within the UE5 Editor / Content Browser, create a <strong>new C++ Class</strong> that is based on an <u>Actor</u>, and name it <strong>Projectile</strong>.</p>
</li>
<li>
<p>Within the <strong>Projectile</strong> header file, add, after <strong>public:</strong> the following:</p>
<ul>
<li>
<p>A function/method to fire in a direction. The shoot direction should be passed in as a <code>const FVector&amp;</code>.</p>
</li>
<li>
<p>A member variable for the collision component (we will use a <strong>USphereComponent</strong>) and one for the movement component (<strong>UProjectileMovementComponent</strong>). These are going to be viewable in editor, so add the <u><code>UPROPERTY</code></u> tag and use <strong>VisibleAnywhere</strong> for them. You should also add them to categories. This is also done in the <strong>UPROPERTY brackets</strong>. The syntax is <code>“Category = MYCATEGORY”</code>. Make one the <strong>“Projectile”</strong> category, and the other <strong>“Movement”</strong>.</p>
</li>
<li>
<p>A member variable for the static mesh (check the variable type where you’ve added a static mesh previously if you don’t remember the type).</p>
</li>
<li>
<p>A static float for the <strong>initial radius</strong> the projectile will spawn at, and a float for the <strong>initial speed</strong>. The latter should be <strong>Editable</strong> from Anywhere in the UE5 editor. Use <code>UPROPERTY</code> to add that and set a category of <strong>“Gameplay”</strong>.</p>
</li>
</ul>
</li>
<li>
<p>Also, add the includes for a <strong>SphereComponent</strong> and a <strong>ProjectileMovementComponent</strong> just before the <code>.generated.h</code> line, so that the component classes are included. You should use the unreal engine docs or google to find these include paths.</p>
</li>
<li>
<p>Open the <em>Projectile</em> <strong>.cpp</strong> file, and just after the <code>#include &quot;Projectile.h&quot;</code> line, initialise your static variable for the radius to <strong>15.0f</strong>. If you don’t remember how to do this, think back to how you made a singleton in SDL. You initialise a static variable there.</p>
</li>
<li>
<p>Within the <em>Projectile</em> <strong>.cpp</strong> file, add the following code to the constructor:</p>
<ul>
<li>
<p>Set our <strong>initial speed</strong> variable to be 1000.</p>
</li>
<li>
<p>Create the <u>collision component</u>, the <u>static mesh component</u> and the <u>projectile movement component</u> using the <strong><code>CreateDefaultSubObject&lt;&gt;()</code></strong> function you used last week. Give them suitable names.</p>
</li>
<li>
<p>We’re next going to call <strong>“InitSphereRadius”</strong> on the collision component and pass in the <strong>initial radius</strong> we set up earlier.</p>
</li>
<li>
<p>Make the collision component the <strong>Root</strong> of the Actor, again, use last week’s code to check how to do this.</p>
</li>
<li>
<p>We need to tell the static mesh what mesh to use. Rather than pass it in, like we have done previously, we’re going to reference it in code. Generally it’s going to be better to pass this information in, but it’s good to know how we can go about it if that isn’t an option. The line looks like this:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">UStaticMesh </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">meshToUse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">Cast</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">UStaticMesh</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">StaticLoadObject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">UStaticMesh</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">StaticClass</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TEXT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/Engine/BasicShapes/Sphere&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It’s pretty ugly, but should get us what we need. We load the object as a generic object type, but tell the engine to look for a static mesh. We then cast the result to a static mesh and store that locally for use.</p>
</li>
<li>
<p>The next bit is a little bit hard to detail all in one go, so I’m going to give you the snippets. You’ll likely need to change the variable names to match your existing code.</p>
<p>If the mesh is valid, we need to: bind it to our static mesh component.</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meshToUse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Bind static mesh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staticMeshComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetStaticMesh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meshToUse</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next we set it up with a material.</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Find and instance a material for the mesh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> ConstructorHelpers</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FObjectFinder </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">UMaterial</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">matGreenFinder</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TEXT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MaterialInstanceConstant&#x27;/Engine/EditorMaterials/WidgetMaterial_Y&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UMaterialInstanceDynamic </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dynMaterial </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">UMaterialInstanceDynamic</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">matGreenFinder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then we set up the dimensions so the projectile is the size of our radius.</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use the bounds of the mesh to scale it so that it is the size of our radius</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FVector minB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> maxB</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staticMeshComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLocalBounds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> maxB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> scale </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> initRad </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> minB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">X</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staticMeshComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetWorldScale3D</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">FVector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scale</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scale</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scale</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We’ll also disable collision on the static mesh, as that is why we have the simpler sphere collider.
We finish by attaching the resulting component to the root object.</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Disable mesh collision and attach the mesh to our root component (The sphere collider)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staticMeshComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetCollisionProfileName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NoCollision&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    staticMeshComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetupAttachment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">RootComponent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Now we’re going to setup the <strong>projectile component</strong>. Inside the component class are several variables we’ll need to set. Below are the variables and their values:</p>
<table><thead><tr><th>Variable</th><th>Value</th></tr></thead><tbody><tr><td>InitialSpeed</td><td>The initial speed variable we stored</td></tr><tr><td>MaxSpeed</td><td>3000</td></tr><tr><td>bRotationFollowsVelocity</td><td>True</td></tr><tr><td>bShouldBounce</td><td>True</td></tr><tr><td>Bounciness</td><td>0.3</td></tr></tbody></table>
</li>
<li>
<p>Finally for the constructor, we need to tell the <strong>projectile movement component</strong> what it needs to move! This will be our root component (the collision component). The function you need is <strong><code>SetUpdatedComponent()</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p>Add the <strong><code>FireInDirection()</code></strong> function code, in <strong>Projectile.cpp</strong>. Because you pass in the direction you want to fire in, this is as simple as setting the velocity in the projectile movement component to be the normalized direction multiplied by our speed.</p>
</li>
<li>
<p>Build the project to check the code is valid.  Run the program to open the UE5 Editor.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_LMjb alert alert--secondary"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_pGk6"><p><strong>Note</strong>: the static attribute, only stored once no matter how many projectile objects are created, is used so that its value can be accessed before an object is spawned – as shown later!  If you wanted a number of constants, a separate class, or enum class, with constants, would need to be added.</p></div></div>
<ol start="8">
<li>
<p>Add Input Action mapping named Fire, which is activated by a Left Mouse Button click.</p>
</li>
<li>
<p>Add code to the <strong>GD_Pawn</strong> that adds a function named void <strong><code>Fire()</code></strong>; and within the cpp file,  add code to <strong>&#x27;bind&#x27;</strong> the fire function to the <strong><code>SetupPlayerInputComponent()</code></strong> function, when a key is Pressed.</p>
</li>
<li>
<p>Create an empty definition  for the <code>Fire()</code> function in the <strong>GD_Pawn.cpp</strong> file.  Save the changes in the UE5 Editor.</p>
</li>
<li>
<p>Within the <strong>GD_Pawn.cpp</strong> file, <code>#include</code> the Projectile header, just after the GD_Pawn header file include, at the top of the file.</p>
</li>
<li>
<p>In the <code>Fire()</code> function:</p>
</li>
</ol>
<ul>
<li>Get the actor bounds and origin using the <strong>GetActorBounds()</strong> function.</li>
<li>Define a <strong>projectionLocation</strong> as the <code>origin + (GetActorForwardVector *</code> the static radius you set up earlier).</li>
<li>Create a default <strong>FRotator</strong> using the <code>FRotator::ZeroRotator</code> static.</li>
</ul>
<ol start="13">
<li>
<p>We’re going to wrap everything else in this function in if(GetWorld()) to make sure we are able to spawn.</p>
</li>
<li>
<p>Now we need some Spawn Parameters. <strong><code>FActorSpawnParams</code></strong> is a container for a bunch of values you can set when you spawn an actor. Set <code>params-&gt;Owner</code> to this and <code>params-&gt;Instigator</code> to <strong>GetInstigator()</strong>.</p>
</li>
<li>
<p>After all this time it is time to create the projectile! The <strong>SpawnActor()</strong> function belongs to the World. Call this function like so:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">AProjectile </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">proj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GetWorld</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token generic-function function" style="color:#d73a49">SpawnActor</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">AProjectile</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AProjectile</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">StaticClass</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    projLoca</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> projRot</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SpawnParams</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If creation is successful (test this by checking if your projectile is null), then call <strong>FireInDirection()</strong> on your new projectile. Pass in the forward vector of the current actor.</p>
</li>
<li>
<p>Run the program, to build and run the program, and check that a projectile is fired on a left mouse button press. You may want to add a small offset in the Z axis to move the spawn location a little away from the actor location to move the projectile up a bit.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="points-to-consider">Points to Consider<a href="#points-to-consider" class="hash-link" aria-label="Direct link to Points to Consider" title="Direct link to Points to Consider">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>It should be noted we can, thus, create a &#x27;complete&#x27; <strong>actor-based</strong> object that can be spawned, as, when, and where required - in this program, on the press of the left mouse button.
You should note that the static mesh and material paths are hard-coded within the code.  <strong>Is this good practice?</strong>  If not, why not?
You should also note how the projectile static mesh is re-scaled so that it matches the collision sphere.<br>
<!-- -->At present, the projectiles move, but they do not <strong>&#x27;bounce&#x27;</strong> off the floor, for instance.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="exercises">Exercises<a href="#exercises" class="hash-link" aria-label="Direct link to Exercises" title="Direct link to Exercises">​</a></h2>
<p>It would be useful to have enemy objects to fire at.</p>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pGk6"><p>Firstly, we will revert to having the UE5 Editor separately controlled to VS2022.  Change the Solution Configuration to Development, and right-click over the Solution, in the Solution Explorer, and select Open Folder in File Explorer.  Close down VS2022. Double-click on the <strong>.uproject</strong> file to open the project in the UE5 Editor.</p></div></div>
<ol>
<li>
<p>Create a <strong>New C++ class</strong> named <code>Enemy</code>, based on an <u>Actor</u>. In <strong>Enemy.h</strong>, add:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">UPROPERTY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">VisibleDefaultsOnly</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Category </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Projectile&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UCapsuleComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">collisionComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Capsule Collision Comp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UStaticMeshComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">staticMeshComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UMaterialInstanceDynamic </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">dynMaterial1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UFUNCTION</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnHit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">UPrimitiveComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">HitComp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AActor </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">OtherActor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UPrimitiveComponent</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> OtherComp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> FVector NormalImpulse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> FHitResult</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> Hit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Add any includes you need.</p>
</li>
<li>
<p>In <strong>Enemy.cpp</strong>, in the constructor:</p>
<ul>
<li>
<p>Create the components you just declared using <strong><code>CreateDefaultSubObject&lt;&gt;()</code></strong>.</p>
</li>
<li>
<p>Set the capsule size of the collision component using the <strong>InitCapsuleSize()</strong> method with a radius of <code>20.0f</code> and a height of <code>50.0f</code>.</p>
</li>
<li>
<p>Enable physics simulation on your collision component by calling the <strong>SetSimulatePhysics()</strong> method and passing &quot;<code>true</code>&quot; as a parameter.</p>
</li>
<li>
<p>Set the collision profile of your collision component to &quot;<code>BlockAll</code>&quot; by using the <strong>SetCollisionProfileName()</strong> method. You will need to use the TEXT() macro that Unreal provides.</p>
</li>
<li>
<p>Enable collision detection on your collision component by calling the <strong>SetCollisionEnabled()</strong> method and passing &quot;<code>ECollisionEnabled::QueryAndPhysics</code>&quot; as a parameter.</p>
</li>
<li>
<p>Make your collision component the root component.</p>
</li>
<li>
<p>Load a static mesh object named &quot;<code>/Engine/BasicShapes/Cylinder</code>&quot; using the <strong>StaticLoadObject()</strong> method and cast it to a &quot;<code>UStaticMesh</code>&quot; type. (You did this earlier with the projectile).</p>
</li>
<li>
<p>If the mesh was successfully loaded, perform the following steps:</p>
<ul>
<li>Assign the mesh to your static mesh component using the <strong>SetStaticMesh()</strong> method.</li>
<li>Load the material “<code>MaterialInstanceConstant&#x27;/Engine/EditorMaterials/WidgetMaterial_Z&#x27;</code>” using the <strong>FObjectFinder()</strong> method and create a dynamic material instance from it (again, see the projectile code).</li>
<li>Set the dynamic material on the first material slot of your static mesh component.</li>
<li>Calculate the scale values required to fit the mesh to the capsule size.<!-- -->
<ul>
<li>Find the bounds using <strong><code>GetLocalBounds()</code></strong>.</li>
<li><code>scaleXZ</code> will be the <code>radius (20)/the bounds min.x</code>.</li>
<li><code>scaleZ</code> is the <code>height (50)/ the bounds min.Z</code>.</li>
</ul>
</li>
<li>Apply the scale to your static mesh component using the <strong>SetWorldScale3D()</strong> method.</li>
<li>Set the collision profile of your static mesh component to &quot;<code>NoCollision</code>&quot; using the <strong><code>SetCollisionProfileName()</code></strong> method.</li>
<li>Attach your static mesh component to the root component using the <strong><code>SetupAttachment()</code></strong> method.</li>
</ul>
</li>
<li>
<p>Finish by loading a material &quot;<code>/Engine/EditorMaterials/WidgetMaterial_X</code>&quot; using the <strong><code>FObjectFinder()</code></strong> method and initialise <code>dynMaterial1</code> with the result.</p>
</li>
</ul>
</li>
<li>
<p>The <strong>OnHit()</strong> function is called a delegate function, i.e. it is dynamically set, and called.  Add the following code in the <code>BeginPlay</code> function, after the Super line:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">collisionComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">OnComponentHit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddDynamic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">AEnemy</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">OnHit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is the same idea as binding your inputs like you have done previously.</p>
<p><strong>Note: Intellisense will not find this, but it does exist. This is because it is a macro, not a function</strong>.</p>
</li>
<li>
<p>Also add a stub function - i.e. defined, but it does NOT do anything - for <strong>OnHit</strong>.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="spawning-enemies-within-a-spawn-volume">Spawning Enemies within a Spawn Volume<a href="#spawning-enemies-within-a-spawn-volume" class="hash-link" aria-label="Direct link to Spawning Enemies within a Spawn Volume" title="Direct link to Spawning Enemies within a Spawn Volume">​</a></h3>
<p>Next, let’s spawn enemies within a specified area / volume.</p>
<ol>
<li>
<p>In the UE5 Editor, create a <strong>New C++ class</strong>, based on <u>Actor</u>, named <strong>SpawnEnemy</strong>.</p>
</li>
<li>
<p>Add the following to <em>SpawnEnemy.h</em>:</p>
<ul>
<li>A variable named <strong>spawnArea</strong> of type <strong><code>UBoxComponent*</code></strong>. The <strong>UPROPERTY</strong> should be <u>EditAnywhere</u>.</li>
<li>A function named <strong><code>GetRandomPointInVolume()</code></strong> that returns a <strong>FVector</strong>.</li>
<li>A function named <strong><code>SpawnEnemy()</code></strong> that returns void.</li>
</ul>
</li>
<li>
<p>Add any required includes.</p>
</li>
<li>
<p>Within <strong>SpawnEnemy.cpp</strong>, include <code>enemy.h</code>.</p>
</li>
<li>
<p>Create spawnArea using <strong><code>CreateDefaultSubobject&lt;&gt;()</code></strong>.</p>
</li>
<li>
<p>Set the size of the box using the <strong>SetBoxExtent()</strong> method on <code>spawnArea</code> with the parameters <strong>600.0, 500.0, 20.0</strong>.</p>
</li>
<li>
<p>Attach <code>spawnArea</code> to the <strong>RootComponent</strong> by calling the &quot;<code>SetupAttachment</code>&quot; method.</p>
</li>
<li>
<p>Now for <code>SpawnEnemy</code>. Start by checking if there is a valid world using the &quot;<code>GetWorld</code>&quot; method.</p>
</li>
<li>
<p>Inside the if statement:</p>
<ul>
<li>Create a <strong>FActorSpawnParameters</strong> object named <strong>spawnParams</strong>.</li>
<li>Set the <strong>Owner</strong> parameter to &quot;<code>this</code>&quot;.</li>
<li>Set the &quot;<code>Instigator</code>&quot; parameter to the result of calling <strong>GetInstigator</strong>.</li>
<li>Set the <strong>SpawnCollisionHandlingOverride</strong> parameter of &quot;<code>spawnParams</code>&quot; to &quot;<code>ESpawnActorCollisionHandlingMethod::AdjustIfPossibleButAlwaysSpawn</code>&quot;. This will ensure that, even if the spawn location has to move a little, it will still make sure to create the projectile.</li>
<li>Call the <strong><code>GetRandomPointInVolume()</code></strong> function and store the result locally as the spawn location.</li>
<li>Create a <strong>FRotator</strong> object with a value of <strong>FRotator::ZeroRotator</strong>.</li>
<li>Call the <strong>SpawnActor</strong> method on <strong>GetWorld</strong> with parameters:<!-- -->
<ul>
<li>The class type <strong>AEnemy</strong> obtained from &quot;<code>AEnemy::StaticClass()</code>&quot;.</li>
<li>The spawn location value.</li>
<li>The zero rotator value.</li>
<li>The &quot;<code>spawnParams</code>&quot; object.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>We would like to get a random point in the volume. We’re going to do this using a built in utility function, based on the bounds of our spawn area. Add the following code to <strong>SpawnEnemy.cpp</strong>:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">FVector </span><span class="token class-name">ASpawnEnemy</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getRandomPtInVolume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FVector spawnOrigin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> whereToSpawn</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Bounds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Origin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FVector spawnExtent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> whereToSpawn</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Bounds</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BoxExtent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">UKismetMathLibrary</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">RandomPointInBoundingBox</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spawnOrigin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spawnExtent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above function uses a UE5 library, so we need to include it.  Add:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;Kismet/KismetMathLibrary.h&quot;</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">// for random in vol</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After the other <code>#include</code> lines in the cpp file.</p>
</li>
<li>
<p>Within the <code>SpawnEnemy</code> source file, in the <code>BeginPlay()</code> function, spawn <strong>6</strong> Enemy objects using an appropriate for-loop.</p>
</li>
<li>
<p>Build the project to verify the code.</p>
</li>
<li>
<p>Within the UE5 Editor, compile the program, and drag the <strong>SpawnEnemy</strong> icon, on to the Viewport, to create an object. Press Play, and enemies should be randomly placed.</p>
</li>
<li>
<p>Save the map.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="handling-collisions">Handling Collisions<a href="#handling-collisions" class="hash-link" aria-label="Direct link to Handling Collisions" title="Direct link to Handling Collisions">​</a></h3>
<p>Now we should make the projectile <strong>&#x27;bounce&#x27;</strong> off objects, and make the Enemy objects respond, as physically realistic objects.</p>
<p>Firstly, we need to make sure <strong>Projectiles</strong> <em>respond</em> when they <strong>&#x27;hit&#x27;</strong> an object.  Do the following:</p>
<ol>
<li>
<p>Add the following code, to the <strong>Projectile.cpp</strong> file, in the constructor, just before &#x27;setting&#x27; the RootComponent to collisionComponent:</p>
<div class="language-cpp codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-cpp codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain">collisionComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetCollisionProfileName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">TEXT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BlockAll&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">collisionComponent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetCollisionEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ECollisionEnabled</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">QueryAndPhysics</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Within the UE5 Editor, compile and Run the program, to build and run the program.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_LMjb alert alert--success"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_pGk6"><p>You should note that the projectile now responds when <strong>&#x27;hitting&#x27;</strong> objects.  Using <strong>&#x27;BlockAll&#x27;</strong> captures most collisions unless objects are specifically set not to. You should also note that the Enemies respond to being <strong>&#x27;hit&#x27;</strong> such that any forces / impulses applied to such objects should respond <strong>&#x27;realistically&#x27;</strong>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="dynamically-changing-a-material-instance">Dynamically Changing A Material Instance<a href="#dynamically-changing-a-material-instance" class="hash-link" aria-label="Direct link to Dynamically Changing A Material Instance" title="Direct link to Dynamically Changing A Material Instance">​</a></h3>
<p>When an Enemy is <strong>&#x27;hit&#x27;</strong>, it would be fun if we could change its appearance.  We can use the previously defined delegate function that will run, when a <strong>‘hit’</strong> has been detected.</p>
<div class="theme-admonition theme-admonition-note admonition_LMjb alert alert--secondary"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_pGk6"><p><strong>Note</strong>: An <strong>OnHit</strong> event may be generated if an enemy <strong>‘drops’</strong> to the floor, so we do NOT want to change material for that.  The Floor has a mesh component that is set as static, i.e. it does not move, so if an <strong>OnHit</strong> event is generated, we can check that the component involved in the collision is NOT static, and then change material!</p></div></div>
<ol>
<li>
<p>Within the <strong>Enemy.cpp</strong> in <strong>OnHit</strong>:</p>
<ul>
<li>
<p>Check if the <strong>OtherActor</strong> is not a static root component by using <strong>IsRootComponentStatic</strong>.</p>
</li>
<li>
<p>If the above check is false, call <strong>AddImpulseAtLocation()</strong> on <strong>HitComp</strong> with parameters:</p>
<ul>
<li>The velocity of <code>OtherActor</code>.</li>
<li><code>Hit.ImpactPoint</code>.</li>
</ul>
</li>
<li>
<p>Create a <strong>TArray</strong> object named <strong>components</strong> of type <strong><code>UStaticMeshComponent*</code></strong>.</p>
</li>
<li>
<p>Call <strong>GetComponents</strong> with template parameter <strong>UStaticMeshComponent</strong> pass in components.</p>
</li>
<li>
<p>If the first element of <strong>components</strong> exists and <strong>dynMaterial1</strong> is also not null, call <strong>SetMaterial</strong> on the first element of <strong>components</strong> with parameters:</p>
<ul>
<li>The index 0.</li>
<li>The <strong>dynMaterial1</strong> object.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Within the UE5 Editor, compile and Run the program, to build and run the program.</p>
<p>You should note that the Enemies now respond to being <strong>&#x27;hit&#x27;</strong> such that the material changes from blue to red!</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_LMjb alert alert--secondary"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_pGk6"><p><strong>Note</strong> how, in <strong>OnHit</strong>, a <code>TArray</code>, in UE5, can store a <strong>‘dynamic’</strong> array.  In this function, an array of static mesh components is stored – there is only 1 static mesh created for this object - and then the first one’s material is changed!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="bonus-exercise">Bonus Exercise<a href="#bonus-exercise" class="hash-link" aria-label="Direct link to Bonus Exercise" title="Direct link to Bonus Exercise">​</a></h2>
<p>Add a static variable within <strong>Enemy.h</strong> as a public attribute, that keeps count of the number of hits.
It should display the number of hits on screen when a new hit happens.</p>
<p><strong>Note:</strong> In a string building function, such as <strong><code>Printf</code></strong>, <code>%s</code> can substitute strings, and <code>%f</code> can substitute float numbers.  You can do a lot of formatting with <strong><code>Printf</code></strong>. Look for examples online.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="more-points-to-consider">More Points to Consider<a href="#more-points-to-consider" class="hash-link" aria-label="Direct link to More Points to Consider" title="Direct link to More Points to Consider">​</a></h2>
<ul>
<li>Why is a static needed ? Are there any issues with this approach ?</li>
<li>It is worth reviewing the UE5 Editor, World Outliner, and Details panel, for each type of object.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Week 1 - Introduction to UE5</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/3b5e95ffbb5780e88fb2ad9652b2eb9aadead95d/docs/GAP5006 Game Dyanmics/tutorial-ue5/week3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Week 3 - Using C++ and Blueprint</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#mouse-input" class="table-of-contents__link toc-highlight">Mouse Input</a><ul><li><a href="#using-mouse-input" class="table-of-contents__link toc-highlight">Using Mouse Input</a></li><li><a href="#responding-to-mouse-inputs" class="table-of-contents__link toc-highlight">Responding to Mouse Inputs</a></li></ul></li><li><a href="#moving-an-object-in-a-rotated-direction" class="table-of-contents__link toc-highlight">Moving an Object in a Rotated Direction</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a><ul><li><a href="#debugging-c-code-in-ue5" class="table-of-contents__link toc-highlight">Debugging C++ Code in UE5</a></li><li><a href="#using-ue5s-log-output" class="table-of-contents__link toc-highlight">Using UE5&#39;s Log Output</a></li><li><a href="#using-vs2022s-debugging-tools" class="table-of-contents__link toc-highlight">Using VS2022&#39;s Debugging Tools</a></li></ul></li><li><a href="#spawning-objects" class="table-of-contents__link toc-highlight">Spawning Objects</a></li><li><a href="#points-to-consider" class="table-of-contents__link toc-highlight">Points to Consider</a></li><li><a href="#exercises" class="table-of-contents__link toc-highlight">Exercises</a><ul><li><a href="#spawning-enemies-within-a-spawn-volume" class="table-of-contents__link toc-highlight">Spawning Enemies within a Spawn Volume</a></li><li><a href="#handling-collisions" class="table-of-contents__link toc-highlight">Handling Collisions</a></li><li><a href="#dynamically-changing-a-material-instance" class="table-of-contents__link toc-highlight">Dynamically Changing A Material Instance</a></li></ul></li><li><a href="#bonus-exercise" class="table-of-contents__link toc-highlight">Bonus Exercise</a></li><li><a href="#more-points-to-consider" class="table-of-contents__link toc-highlight">More Points to Consider</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mohammed Fajer, University of Bolton.</div></div></div></footer></div>
</body>
</html>